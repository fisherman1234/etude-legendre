<%%=raw jqgrid("<%= plural_name.capitalize %> Listing ", "<%= plural_name %>", "/<%= plural_name %>", 
[ 
	<% columns.each_with_index do |attribute, i|-%> 
		{ :name => "<%= attribute %>", :label => "<%= attribute %>" }<% if i < columns.size - 1 -%>,<% end %> 
	<% end -%> 
], 
{
	:autowidth => true, :editurl => "/<%= plural_name %>/post_data",
	
	<% if !details.empty? %>
	:master_details => [
		<% details.each do |detail| %>
		{:url => "/<%= plural_name %>/<%=detail.model.downcase%>_details", :grid_id => "<%=detail.model.downcase%>_details", :caption => "<%=detail.model%> details for id: "},
		<% end %>
	]
	<% end %>
} 
) %>


<% if !details.empty? %>
	<% details.each do |detail| %>
	<br>
	<br>
	<%%=raw jqgrid("<%= detail.model %> Listing ", "<%=detail.model.downcase%>_details", "/<%= plural_name%>/<%=detail.model.downcase%>_details", 
	[ 
		<% detail.columns.each_with_index do |attribute, i|-%> 
			{ :name => "<%= attribute %>", :label => "<%= attribute %>" }<% if i < columns.size - 1 -%>,<% end %> 
		<% end -%> 
	], 
	{
		:autowidth => true, :editurl => "/<%= plural_name %>/<%=detail.model.downcase%>_post_data"
	} 
	) %>
	<% end %>
<% end %>

